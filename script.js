
const pandals = {
  asansol: [
    
    {
      name: "Kalyanpur Scheme-2",
      desc: "Famous for its classic idol decoration",
      img: "https://tse1.mm.bing.net/th/id/OIP.dm2qoY3e3ZQ81xkdXX3ZJwHaE8?pid=Api&P=0&h=180",
      link: "https://maps.app.goo.gl/ptsCVokFZb76UHdp6"  
    },
    {
      name: "Kalyanpur Adi Puja",
      desc: "Traditional pandal with vibrant lights",
      img: "https://tse1.mm.bing.net/th/id/OIP.TbT4reTJ2KE9M4fTWjiBRwHaE8?pid=Api&P=0&h=180",
      link: "https://maps.app.goo.gl/ccS88JSQeG2L5vCa9"  
    },
    {
      name: "K-sector Kalyanpur Housing",
      desc: "Creative lighting with a large loving crowd.",
      img: "https://tse3.mm.bing.net/th/id/OIP._nEPfniYF8m0jKj70ud1WAHaEK?pid=Api&P=0&h=180",
      link: "https://maps.app.goo.gl/67ibi8rDM23XLVva6"
    },
    {
      name: "Rabindranagar",
      desc: "Popular for colorful decorations",
      img: "https://lh3.googleusercontent.com/gps-cs-s/AC9h4nr8dTAf0zdEToWBHOcypyOIQQeXDJrRfRmaXEHxsOh4-rSoqc320xV-y8kmLHaCsRaWfVK5FxqRJSlao6LlHiOcDpZyTh3wJUBeDC_iVrGdcuYvuZ5c8rVrsy6373tpxcYNEbIE=w408-h306-k-no",
      link: "https://maps.app.goo.gl/77swGu3R4D9aAmiz5"  
    },
     {
      name: "Radhanagar Road Atheletic Club",
      desc: "Large pandal with food stalls",
      img: "https://tse2.mm.bing.net/th/id/OIP.-n9D-bj3cIAy7pNe1Xgj7QHaEK?pid=Api&P=0&h=180",
      link: "https://maps.app.goo.gl/THNcDcBQ3xPfsEir8"  
    },
     {
      name: "Court Road Puja Comittee",
      desc: "Small Pandal but concept Driven",
      img: "https://lh3.googleusercontent.com/gps-cs-s/AC9h4noFqHo3VS1jqyPX73sY8FQX5XwCJp_J0UomsEqLIvgD75HHCEkVDZPA8OeJvmfy2yYWquAxXVhLRBMG2GXGziv7g9Pz5V4-6d1Us4BL80Ec3QdiirPdBQKuZRaNipP2cA6WpGYq=w533-h240-k-no",
      link: "https://maps.app.goo.gl/3TuebFS2v1qj7RJg7"  
    },
    {
      name: "Netaji Sporting Club, Burnpur",
      desc: "Grand idol and vibrant cultural events..",
      img: "https://lh3.googleusercontent.com/gps-cs-s/AC9h4npKGwr2zx8AjQRy8ezyTBDE4MFkHedu0K8Jg5BbcZKzlqlY2dp8QWqEvBhil3bSdbYtdvLOzlB8YKtTetOf7I3RFrtg4fJMcQPG5Kf474eUTE3YVyvYJzewjT7PWDsiNo0kxhAC=w408-h307-k-no",
      link: "https://maps.app.goo.gl/pHZw1W2FSgShU8Db7"
    },
    {
      name: "Gandhinagar / Panchgachia",
      desc: "Traditional Varanasi and ganga Arati theme",
      img: "https://lh3.googleusercontent.com/gps-cs-s/AC9h4nrOcPNFaurVYGHZWIOdfq2H0gcYccJA5DoBw-MWoaXZtqy8Ozg0P1VUeH33ERnBzKM1BLRIh-gy9IKvliQECZ_VUawcjq1JwepmeyIWtavX_x_1rRMQnvVmhW5eeHgD7L1QRwBpiQ=w408-h306-k-no",
      link: "https://maps.app.goo.gl/tqkBJyUcuaZfyrKV7"  
    },
    {
      name: "Dheomain Colliery",
      desc: "Famous for its lighting.",
      img: "https://lh3.googleusercontent.com/gps-cs-s/AC9h4nokoTYPg4dBo2fdw5cljPMv_yeHT1UIbtL1-g2OQ16kXK6ZQCFf3rOv7cd2EqckifvlaZWQfE1PGfsQ6-1oiXYOBN3lBq3-OpiDMYZQ9TjuAtuUoiQ6ZVTk4K0pQA90h3fC8RaNFw=w408-h306-k-no",
      link: "https://maps.app.goo.gl/FPatu2LpnyvYTmMP8" 
    },
     {
      name: "Gopalpur",
      desc: "Small but concept packed pendel.",
      img: "https://lh3.googleusercontent.com/gps-cs-s/AC9h4nojndFwuBiEjgoliTH44MMbOEk3dFDPkDv1vOqjSx5pVrEirzceFLftT_z0AOK2cLqsYfLkeED3EuG4FPoNTc4Ri3WV3X97R_3HYKbQRNQDw4WHof1wxs1KN2Qfem5v_uJWGyvx=w408-h306-k-no",
      link: "https://maps.app.goo.gl/SyF91VnGxvGSQCZo6" 
    },
     {
      name: "Apcar Garden",
      desc: "Famous for it after-puja shows.",
      img: "https://lh3.googleusercontent.com/gps-cs-s/AC9h4nqyGhyRyCCT3IYYUxshyx2cmabuPrCMlAY1y4iCnnjWlRfG3U9iJsW3K_jx2L4iUWu2HRp6fie8pcmvmNv0iGbIFcIQ1tLMzfjU5a-Ww5BZBjnMYuLAD4kB2i3f-lGXFOGpOaJqxQ=w408-h305-k-no",
      link: "https://maps.app.goo.gl/2jXTA2cRNYPLiyEk7" 
    },


   
  ],
  durgapur: [
    {
      name: "Gopalmath",
      desc: "Theme: Prem Mandir. Vrindavan",
      img: "https://lh3.googleusercontent.com/gps-cs-s/AC9h4npz0tA9CGahF1ePO4p--DnmrYFojzP53e5b8mQ0bl5tkdkmsU9EWvrquX-1JrQoATW_aoJqI3OpoLVtS8kV9c5trOz_ubg8x2b3xygwt95FfZaQbVhaQv0G5H9pYzxrMQyGIkCMUQ=w408-h305-k-no",
      link: "https://maps.app.goo.gl/PJDdeJMiWa1fEodP9"  
    },
    {
      name: "Agrani",
      desc: "Theme: Wat Arun Temple,Bangkok",
      img: "https://lh3.googleusercontent.com/gps-cs-s/AC9h4nqSngmRSLma37BOWoHI8VHesJk2VvW_FtdVsrn8IY31H8zz0kERd5RfpvPx_Ep06mWneJTC8yUBUhIN3Mhvgy1AcBKZ83g3FE1GS3Vmou3lHQMOQs8121sjvqC6U1pb06vQkKw2=w408-h306-k-no",
      link: "https://maps.app.goo.gl/3hdVKcLa7YKgr2F47"  
    },
     {
      name: "Bhiringi Nabaroon",
      desc: "Famous for large scale fair",
      img: "https://lh3.googleusercontent.com/gps-cs-s/AC9h4nomU5LzkITY8TtVWR3T06Wfuk8PuVVTsol21Ej2u5FOY8SzU6iUYO3CKPlKdgvZpJuwXz6z5IBLK0HBSfb-STOPrPvzg4OVtHPrCRkNUh7xNF7c-4doLQXxvlO0gK9gOkr6H6yaQg=w408-h306-k-no",
      link: "https://maps.app.goo.gl/bnCqKZQvZoY8KgUe9"  
    },
     {
      name: "Chaturanga ",
      desc: "Located in spacious spcae famous for concept pendels ",
      img: "https://lh3.googleusercontent.com/gps-cs-s/AC9h4nr2rKMGo7LpN4Kx2HsOZB1aEWKzBo8Jlz1NtN7TdBthJqgNRBdjQMEvRwuaD4poEIYlMJVIZ1tYiWgM1sdl6CneKrCpWvOMMDFB7w3ZPS8Fdod6MMAdS_sDXa6ePi57VBuM36Gh=w408-h544-k-no",
      link: "https://maps.app.goo.gl/GLsqKhrrMriJVH418"  
    },
     {
      name: "Marconi Dakshin Pally ",
      desc: "Theme: Famous Museum of Thailand",
      img: "https://lh3.googleusercontent.com/gps-cs-s/AC9h4nqLeZIPx3LSTfbxv_GuMjnszuXZXbDOUhayGAEL04N7XiJPJf53_6joi5enIbLohVSHJ9AFTzh2vhsIJAmn3cEHqTeDTilAonV4SLbu85PxnN_6s40uUZYZduI2oADZ50oWwwgD=w408-h306-k-no",
      link: "https://maps.app.goo.gl/xc1aKfW36u1UoknX8"  
    },
     {
      name: "Fuljhore",
      desc: "Theme: Matir Tane",
      img: "https://lh3.googleusercontent.com/gps-cs-s/AC9h4nr16NxPzsVGc_eGpVQRSKDg9dKwZ28gfK9yx4MabRhqFSE_77ebCSePPawK3qBHICIRfqE9uETeYtVHtm-jkIyuWxwkOXp2D-_DBJIli2zFhYzZoK_S6rVieyDbqIncPCPDOSP9_w=w408-h306-k-no",
      link: "https://maps.app.goo.gl/UZerBHRuMMwnXd8JA"  
    },
     {
      name: "Shankarpur ",
      desc: "Theme: Jagganath temple of Digha",
      img: "https://lh3.googleusercontent.com/gps-cs-s/AC9h4noq0AYIEFRIPQyBHKZR1xMN48KMa6Q2YxA4QdTdKJDPEIFlccfoNxb4x9QVfZyHSUK-2pZEMwMj1ttDreLf2_iSB68YyooOtPiOm-8f7yVXVe6gGqyShe7YjMkKZAXeIW999fM=w408-h520-k-no",
      link: "https://maps.app.goo.gl/g9VKAkDRaWSJ4aqbA"  
    },
     {
      name: "Buddha Bihar Sarbojanin ",
      desc: "Small but Concept driven pendel",
      img: "https://lh3.googleusercontent.com/gps-cs-s/AC9h4nprghG4IM-Wg151mNLIx-sa_AQPxpsCrRiR3_BrqOHE2kQPci2Cw6kEXJc3-GOnKqHiWxdtX01xTcLkC4Fjazp8oEjqEt87nLmBzPni72YBYTvY09gWy103Pta2jrhk2lMzHmQ=w408-h306-k-no",
      link: "https://maps.app.goo.gl/VQLsEe7RdtSPiCe16"  
    },
     {
      name: "Cement Park",
      desc: "Located in Heart of city",
      img: "https://lh3.googleusercontent.com/gps-cs-s/AC9h4noG0OZ1uFLHiHYE5F43wf5xiH6vzA7WNo9odVTEdqkDEJHGC4jh4uCQmAbmRdvQWhrr-D0ECMRFAkVD3yVlCAGpXsY_zHHAyAidn8aHANi4mJb6ROLZ6TR_DgwH_goiNjpN30yw=w408-h306-k-no",
      link: "https://maps.app.goo.gl/N4Pz25jeLTabdXKR7"  
    },
     {
      name: "Sepco ",
      desc: "Small but concept-driven",
      img: "https://lh3.googleusercontent.com/gps-cs-s/AC9h4nrtNG4Yxd1wvOB16ZzqWOrep4Zqob4LVOxhCNSHhxcLA3gaCTcxZHHu0uLROET8Z6yrqd2xMuYVAzMMbJZDTyYKiTfSFvFTb10O3EBR3UKI6kxDdGFEWXRDmL-UB4PtWAi0TRRdRw=w408-h306-k-no",
      link: "https://maps.app.goo.gl/1rXj6n54JeWK4GM4A"  
    },
     {
      name: "Urvashi",
      desc: "Golden Temple theme this year",
      img: "https://lh3.googleusercontent.com/gps-cs-s/AC9h4nrCpD7fvRtAoaGDNsVZH5pUwJiG3F3e_PTAhuafZw7r--8lHghW8fkiCvhQfAYn81hK5yagFYg-LcdbGldncs30gh_E4HVf8pkgsfF8hBGlisjKN27R89qtU0SM7n67Cjkx9j4fEA=w408-h544-k-no",
      link: "https://maps.app.goo.gl/G1iLdbMcTdp2X2sK7"  
    },
     {
      name: "Sector 2C",
      desc: "Famous for lighting",
      img: "https://lh3.googleusercontent.com/gps-cs-s/AC9h4noM1-PeUQ1pJcuD0v7EIyKVWkMwz4Wg_aEyIAEno8PeoLl_aEZcNwggYQcBDZOanPmcSezGpd7vHivVV5wRbCA_bEIraJ6ULKbWhtw0qi2mxvg6uSucT75LGR_LN_orrQU3DUeI4A=w408-h306-k-no",
      link: "https://maps.app.goo.gl/n9y2j7aEAWwFYxLQ8"  
    },
     {
      name: "Club Santose",
      desc: "Food stalls, community events.",
      img: "https://lh3.googleusercontent.com/gps-cs-s/AC9h4nody2zQzkPpg25gx2qiZ2Hqlpa1wLIr4v4URw3scL5q39ahIai3cGWx7CNMJuLFmy7yC4k7O3ZJ13_3r6E2lxvq90QS21jt_MopShSpEB6-DYr0G906t2T7dDyHxRwa5-Kev12b=w408-h306-k-no",
      link: "https://maps.app.goo.gl/iqWFwhfeqzc3EVhr8"  
    },
     {
      name: "Muchipara",
      desc: "Famous for scenery pendels",
      img: "https://lh3.googleusercontent.com/gps-cs-s/AC9h4nosORFRg_BvJwFk8vuvYuPx4TDhMHLfxFRPR-L2_bRWFkfRXGoCuyzpN5_b9pTHfgoL6ue_iWSIMBPIVaO1LAFU9-2leqOWzw2r3Aeux49vyWzjUVsDQTvToc13KhNVv_R9Dq-J=w408-h306-k-no",
      link: "https://maps.app.goo.gl/GENyDz6bUcEz2WTi7"  
    },
   
  ]
};


function createPandalCard(p) {
  const card = document.createElement("div");
  card.className = "card pandal-card"; 
  card.innerHTML = `
    <img src="${p.img}" alt="${p.name}">
    <div class="card-content">
      <h3>${p.name}</h3>
      <p>${p.desc}</p>
      <a href="${p.link}" target="_blank">üìç Open Map</a>
      <div class="whatsapp-btn" onclick="shareWhatsApp('${p.name}', '${p.link}')">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="Share">
      </div>
    </div>
  `;
  return card;
}


function render(city) {
  const container = document.getElementById("pandal-list");
  container.innerHTML = "";
  const list = pandals[city] || [];
  list.forEach(p => {
    const card = createPandalCard(p);
    container.appendChild(card);
  });
}


const allPandals = [...pandals.asansol, ...pandals.durgapur];

// Search functionality 
const searchInput = document.getElementById('search');
const suggestions = document.getElementById('suggestions');
const pandalList = document.getElementById('pandal-list');

function renderPandalByName(name) {
  pandalList.innerHTML = '';
  allPandals.forEach(p => {
    if(name === '' || p.name.toLowerCase().includes(name.toLowerCase())){
      const card = createPandalCard(p); // use same structure for WhatsApp button
      pandalList.appendChild(card);
    }
  });
}

searchInput.addEventListener('input', () => {
  const term = searchInput.value.toLowerCase();
  suggestions.innerHTML = '';

  if(term === ''){
    suggestions.style.display = 'none';
    renderPandalByName(''); // show all pandals
    return;
  }

  const filtered = allPandals.filter(p => p.name.toLowerCase().includes(term));

  filtered.forEach(p => {
    const li = document.createElement('li');
    li.textContent = p.name;
    li.addEventListener('click', () => {
      searchInput.value = p.name;
      suggestions.style.display = 'none';
      renderPandalByName(p.name); // show only clicked pandal
    });
    suggestions.appendChild(li);
  });

  suggestions.style.display = filtered.length ? 'block' : 'none';
});


document.addEventListener('click', (e) => {
  if(!e.target.closest('.search-container')) suggestions.style.display = 'none';
});


//  LEAFLET MAP 
const map = L.map("route-map").setView([23.7, 86.95], 12);

L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
  attribution:
    '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
}).addTo(map);

const redIcon = L.icon({
  iconUrl: "http://maps.google.com/mapfiles/ms/icons/red-dot.png",
  iconSize: [32, 32],
  iconAnchor: [16, 32],
  popupAnchor: [0, -32],
});

// ==================== PANADAL DATA ====================
const allpandals = [
  // Asansol
  { name: "Kalyanpur Scheme-2", lat: 23.704, lng: 86.956 },
  { name: "Kalyanpur Adi Puja", lat: 23.7019, lng: 86.9582 },
  { name: "K-sector Kalyanpur Housing", lat: 23.6998, lng: 86.9586 },
  { name: "Rabindranagar", lat: 23.6884, lng: 86.9444 },
  { name: "Radhanagar Road Athletic Club", lat: 23.6861, lng: 86.9403 },
  { name: "Court Road Puja Committee", lat: 23.6914, lng: 86.9473 },
  { name: "Netaji Sporting Club, Burnpur", lat: 23.6724, lng: 86.9445 },
  { name: "Gandhinagar / Panchgachia", lat: 23.7273, lng: 86.9524 },
  { name: "Dheomain Colliery", lat: 23.7045, lng: 86.9088 },
  { name: "Gopalpur", lat: 23.7004, lng: 86.9319 },
  { name: "Apcar Garden", lat: 23.6942, lng: 86.9543 },
  // Durgapur
  { name: "Gopalmath", lat: 23.5753, lng: 87.2334 },
  { name: "Agrani", lat: 23.5604, lng: 87.2746 },
  { name: "Bhiringi Nabaroon", lat: 23.5487, lng: 87.2707 },
  { name: "Chaturanga", lat: 23.5429, lng: 87.3019 },
  { name: "Marconi Dakshin Pally", lat: 23.5665, lng: 87.3117 },
  { name: "Fuljhore", lat: 23.5362, lng: 87.3364 },
  { name: "Shankarpur", lat: 23.5281, lng: 87.3574 },
  { name: "Buddha Bihar Sarbojanin", lat: 23.5517, lng: 87.3110 },
  { name: "Cement Park", lat: 23.5400, lng: 87.2936 },
  { name: "Sepco", lat: 23.5501, lng: 87.3166 },
  { name: "Urvashi", lat: 23.5365, lng: 87.3048 },
  { name: "Sector 2C", lat: 23.5117, lng: 87.3546 },
  { name: "Club Santose", lat: 23.5114, lng: 87.3531 },
  { name: "Muchipara", lat: 23.5062, lng: 87.3519 },
];


// Dark mode map tiles
const darkTiles = L.tileLayer(
  "https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",
  {
    attribution:
      '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/">CARTO</a>',
  }
);


const lightTiles = L.tileLayer(
  "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
  {
    attribution:
      '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
  }
);


lightTiles.addTo(map);

allpandals.forEach((pandal) => {
  L.marker([pandal.lat, pandal.lng], { icon: redIcon })
    .addTo(map)
    .bindPopup(`<b>${pandal.name}</b>`);
});


function shareWhatsApp(name, link) {
  const text = `Check out this Durga Puja Pandal: ${name} - ${link}`;
  window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
}

// ===== Dark Mode Toggle =====
const darkModeToggle = document.getElementById('darkModeToggle');

darkModeToggle.addEventListener('click', () => {
  document.body.classList.toggle('dark-mode');


  if(document.body.classList.contains('dark-mode')){
    darkModeToggle.textContent = '‚òÄÔ∏è Light Mode';
  } else {
    darkModeToggle.textContent = 'üåô Dark Mode';
  }
});

// ===== Back to Top Button =====
const backToTopBtn = document.getElementById('backToTop');


window.addEventListener('scroll', () => {
  if(window.scrollY > 300){
    backToTopBtn.style.display = 'block';
  } else {
    backToTopBtn.style.display = 'none';
  }
});


backToTopBtn.addEventListener('click', () => {
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  });
});






